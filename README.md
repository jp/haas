# Pige de NoÃ«l chez la famille Brault

## Compatibility

Works on linux and probably osx.
Might work on Windows too, but by default the SQLite database is written in a Unix path: ```/tmp/pige.db```.
The path of the SQLite database can be set with the environment variable ```ENV['PIGE_SQLITE_DB']```.

Tested on ruby 2.1.1p76 and rubygems 2.2.2. It should work with versions of ruby >= 1.9.3.

Doesn't work with JRuby due to the use of the sqlite3 gem.

## Build and install the gem

```
gem build pige.gemspec
gem install pige-0.0.1.gem
rbenv rehash # if using rbenv
```

## Use the command line pige

### Add a member
```
pige -a joe
```

### Add a partner to a new or an existing member
```
pige -a bob -p kathryn
```

### Run the automated pige
```
pige -r
```

### Get a member's pige
```
pige -g kathryn
```

### Run the pige web server
```
pige -s
```

## Pige web server

The only feature on the web server interface is to retrieve the pige for a user after the automated pige have run.

The pige server is launched on the port 9000.

When the web server is launched, each member can get is pige with the following URL:
[http://localhost:9000/pige/:user_name](http://localhost:9000/pige/:member_name)

## Run the tests

```
bundle install
rspec spec
```

Test coverage is automatically generated by simplecov in the ```./coverage``` directory while running the tests.

# Scalability

For a bigger exposure, it is easy to switch the database from SQLite to a better one like PostgreSQL.

The gem can also easily be deployed on multiple servers for example by the use of chef cookbooks.
This cookbook gives the ability to install rvm, the version of ruby you want and some global gems : https://github.com/fnichol/chef-rvm#-global_gems
It can be used for a global deployment of this software.

## TODO

Tests for the rack server.

Tests for the command line tool.

Erb / Haml views to be declared for the web server output.
